import{c as i,o as d,b as e,d as b,t as a,F as c,r as g,w as h,e as n,v as m,f as w,N as f}from"./app-Bv9tdwX1.js";import{_ as v}from"./_plugin-vue_export-helper-DlAUqK2U.js";const k={name:"AdminProducts",props:{products:Array,categories:Array},data(){return{showModal:!1,isEdit:!1,editProductId:null,form:{name:"",category_id:"",price:"",stock:"",sku:"",brand:"",description:""},images:[],imagePreviews:[]}},methods:{formatPrice(o){const t=parseFloat(o);return isNaN(t)?"0.00":t.toFixed(2)},handleImageChange(o){this.images=Array.from(o.target.files),this.imagePreviews=this.images.map(t=>URL.createObjectURL(t))},addProduct(){const o=new FormData;Object.entries(this.form).forEach(([t,u])=>o.append(t,u)),this.images.forEach((t,u)=>o.append("images[]",t)),this.isEdit?(o.append("_method","PUT"),f.post(`/admin/products/${this.editProductId}`,o,{forceFormData:!0,onSuccess:()=>{this.resetForm()}})):f.post("/admin/products",o,{forceFormData:!0,onSuccess:()=>{this.resetForm()}})},openEditModal(o){this.isEdit=!0,this.editProductId=o.id,this.form={name:o.name,category_id:o.category_id,price:o.price,stock:o.stock,sku:o.sku,brand:o.brand,description:o.description},this.showModal=!0},openAddModal(){this.isEdit=!1,this.editProductId=null,this.form={name:"",category_id:"",price:"",stock:"",sku:"",brand:"",description:""},this.showModal=!0},deleteProduct(o){confirm("Are you sure you want to delete this product?")&&f.delete(`/admin/products/${o}`)},resetForm(){this.showModal=!1,this.isEdit=!1,this.editProductId=null,this.form={name:"",category_id:"",price:"",stock:"",sku:"",brand:"",description:""},this.images=[],this.imagePreviews=[]},methods:{getImageUrl(o){return`/storage/${o.replace(/^storage\//,"")}`}}}},_={class:"min-h-screen bg-gray-50"},P={class:"max-w-6xl mx-auto py-12 px-4 sm:px-6 lg:px-8"},C={key:0,class:"mb-4 p-4 bg-green-100 text-green-800 rounded"},M={key:1,class:"mb-4 p-4 bg-red-100 text-red-800 rounded"},E={class:"bg-white shadow rounded-lg p-6"},U={class:"flex justify-between items-center mb-4"},A={class:"overflow-x-auto"},I={class:"min-w-full divide-y divide-gray-200"},F={class:"bg-white divide-y divide-gray-200"},N={class:"px-6 py-4 whitespace-nowrap"},S={class:"px-6 py-4 whitespace-nowrap"},D={class:"px-6 py-4 whitespace-nowrap"},V={class:"px-6 py-4 whitespace-nowrap"},j={class:"px-6 py-4 whitespace-nowrap"},q=["src"],B={key:1,class:"text-gray-400"},L={class:"px-6 py-4 whitespace-nowrap"},O=["onClick"],z=["onClick"],R={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50"},T={class:"bg-white rounded-lg shadow-lg w-full max-w-lg p-6 relative"},K={class:"text-xl font-bold mb-4"},G={class:"mb-4"},H={class:"mb-4"},J=["value"],Q={class:"mb-4"},W={class:"mb-4"},X={class:"mb-4"},Y={class:"mb-4"},Z={class:"mb-4"},$={class:"mb-4"},ee={class:"flex flex-wrap mt-2"},te=["src"],se={class:"flex justify-end"};function oe(o,t,u,re,r,l){return d(),i("div",_,[t[24]||(t[24]=e("nav",{class:"bg-white shadow mb-8"},[e("div",{class:"max-w-6xl mx-auto px-4 py-4 flex space-x-6"},[e("a",{href:"/admin/dashboard",class:"text-gray-700 hover:text-blue-700"},"Dashboard"),e("a",{href:"/admin/products",class:"text-blue-700 font-semibold"},"Products")])],-1)),e("div",P,[t[13]||(t[13]=e("h1",{class:"text-3xl font-bold text-gray-900 mb-6"},"Product Management",-1)),o.$page.props.flash&&o.$page.props.flash.success?(d(),i("div",C,a(o.$page.props.flash.success),1)):b("",!0),o.$page.props.errors&&Object.keys(o.$page.props.errors).length?(d(),i("div",M,[(d(!0),i(c,null,g(o.$page.props.errors,(s,p)=>(d(),i("div",{key:p},a(s),1))),128))])):b("",!0),e("div",E,[e("div",U,[t[11]||(t[11]=e("h2",{class:"text-xl font-semibold"},"Products",-1)),e("button",{onClick:t[0]||(t[0]=(...s)=>l.openAddModal&&l.openAddModal(...s)),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},"Add Product")]),e("div",A,[e("table",I,[t[12]||(t[12]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Name"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Category"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Price"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Stock"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Image"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",F,[(d(!0),i(c,null,g(u.products,s=>{var p,y;return d(),i("tr",{key:s.id},[e("td",N,a(s.name),1),e("td",S,a(((p=s.category)==null?void 0:p.name)||"Uncategorized"),1),e("td",D,"$"+a(l.formatPrice(s.price)),1),e("td",V,a(s.stock),1),e("td",j,[s.images&&s.images.length?(d(),i("img",{key:0,src:`${o.$page.props.asset}/${((y=s.images.find(x=>x.is_primary))==null?void 0:y.image_path)||s.images[0].image_path}`,class:"w-12 h-12 object-cover rounded"},null,8,q)):(d(),i("span",B,"No image"))]),e("td",L,[e("button",{onClick:x=>l.openEditModal(s),class:"text-blue-600 hover:underline mr-2"},"Edit",8,O),e("button",{onClick:x=>l.deleteProduct(s.id),class:"text-red-600 hover:underline"},"Delete",8,z)])])}),128))])])])])]),r.showModal?(d(),i("div",R,[e("div",T,[e("h2",K,a(r.isEdit?"Edit Product":"Add New Product"),1),e("form",{onSubmit:t[10]||(t[10]=h((...s)=>l.addProduct&&l.addProduct(...s),["prevent"]))},[e("div",G,[t[14]||(t[14]=e("label",{class:"block text-gray-700"},"Name",-1)),n(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>r.form.name=s),type:"text",class:"w-full border rounded px-3 py-2 mt-1",required:""},null,512),[[m,r.form.name]])]),e("div",H,[t[16]||(t[16]=e("label",{class:"block text-gray-700"},"Category",-1)),n(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>r.form.category_id=s),class:"w-full border rounded px-3 py-2 mt-1",required:""},[t[15]||(t[15]=e("option",{value:""},"Select Category",-1)),(d(!0),i(c,null,g(u.categories,s=>(d(),i("option",{key:s.id,value:s.id},a(s.name),9,J))),128))],512),[[w,r.form.category_id]])]),e("div",Q,[t[17]||(t[17]=e("label",{class:"block text-gray-700"},"Price",-1)),n(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>r.form.price=s),type:"number",step:"0.01",class:"w-full border rounded px-3 py-2 mt-1",required:""},null,512),[[m,r.form.price]])]),e("div",W,[t[18]||(t[18]=e("label",{class:"block text-gray-700"},"Stock",-1)),n(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>r.form.stock=s),type:"number",class:"w-full border rounded px-3 py-2 mt-1",required:""},null,512),[[m,r.form.stock]])]),e("div",X,[t[19]||(t[19]=e("label",{class:"block text-gray-700"},"SKU",-1)),n(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>r.form.sku=s),type:"text",class:"w-full border rounded px-3 py-2 mt-1"},null,512),[[m,r.form.sku]])]),e("div",Y,[t[20]||(t[20]=e("label",{class:"block text-gray-700"},"Brand",-1)),n(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>r.form.brand=s),type:"text",class:"w-full border rounded px-3 py-2 mt-1"},null,512),[[m,r.form.brand]])]),e("div",Z,[t[21]||(t[21]=e("label",{class:"block text-gray-700"},"Description",-1)),n(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=s=>r.form.description=s),class:"w-full border rounded px-3 py-2 mt-1"},null,512),[[m,r.form.description]])]),e("div",$,[t[22]||(t[22]=e("label",{class:"block text-gray-700"},"Images",-1)),e("input",{type:"file",multiple:"",onChange:t[8]||(t[8]=(...s)=>l.handleImageChange&&l.handleImageChange(...s)),class:"w-full border rounded px-3 py-2 mt-1"},null,32),e("div",ee,[(d(!0),i(c,null,g(r.imagePreviews,(s,p)=>(d(),i("img",{key:p,src:s,class:"w-16 h-16 object-cover rounded mr-2 mb-2"},null,8,te))),128))])]),e("div",se,[e("button",{type:"button",onClick:t[9]||(t[9]=s=>r.showModal=!1),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded mr-2"},"Cancel"),t[23]||(t[23]=e("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded"},"Save",-1))])],32)])])):b("",!0)])}const le=v(k,[["render",oe]]);export{le as default};
