import{c as l,o as r,a as y,b as e,d as n,t as a,F as c,r as x,w as h,e as m,v as p,f as v,N as f}from"./app-ZQoS0dmW.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";const _={props:{categories:Array},data(){return{showModal:!1,isEdit:!1,editCategoryId:null,form:{name:"",slug:"",description:"",is_active:1,image:null,existingImage:null}}},methods:{openAddModal(){this.isEdit=!1,this.editCategoryId=null,this.form={name:"",slug:"",description:"",is_active:1,image:null,existingImage:null},this.showModal=!0},openEditModal(o){this.isEdit=!0,this.editCategoryId=o.id,this.form={name:o.name,slug:o.slug,description:o.description,is_active:o.is_active?1:0,image:null,existingImage:o.image},this.showModal=!0},handleImage(o){this.form.image=o.target.files[0]},saveCategory(){const o=new FormData;o.append("name",this.form.name),o.append("slug",this.form.slug),o.append("description",this.form.description),o.append("is_active",this.form.is_active),this.form.image&&o.append("image",this.form.image);const t=this.isEdit?`/admin/categories/${this.editCategoryId}`:"/admin/categories";this.isEdit&&o.append("_method","PUT"),f.post(t,o,{onSuccess:()=>this.resetForm(),forceFormData:!0,preserveScroll:!0})},deleteCategory(o){confirm("Are you sure you want to delete this category?")&&f.visit(`/admin/categories/${o}`,{method:"delete",preserveScroll:!0,onSuccess:()=>this.resetForm()})},resetForm(){this.showModal=!1,this.isEdit=!1,this.editCategoryId=null,this.form={name:"",slug:"",description:"",is_active:1,image:null,existingImage:null}}}},C={class:"min-h-screen bg-gray-50"},k={class:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8"},I={key:0,class:"mb-4 p-4 bg-green-100 text-green-800 rounded"},M={key:1,class:"mb-4 p-4 bg-red-100 text-red-800 rounded"},E={class:"bg-white shadow rounded-lg p-6"},S={class:"flex justify-between items-center mb-4"},A={class:"overflow-x-auto"},N={class:"min-w-full divide-y divide-gray-200"},D={class:"bg-white divide-y divide-gray-200"},F={class:"px-6 py-4"},V={class:"px-6 py-4"},j={class:"px-6 py-4"},U={class:"px-6 py-4"},B=["src"],q={class:"px-6 py-4"},P=["onClick"],T=["onClick"],Y={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50"},z={class:"bg-white rounded-lg shadow-lg w-full max-w-md p-6 relative"},L={class:"text-xl font-bold mb-4"},O={class:"mb-4"},G={class:"mb-4"},H={class:"mb-4"},J={class:"mb-4"},K={class:"mb-4"},Q={key:0,class:"mt-2"},R=["src"],W={class:"flex justify-end"};function X(o,t,b,Z,i,d){var g;return r(),l("div",C,[t[18]||(t[18]=y('<nav class="bg-white shadow mb-8"><div class="max-w-4xl mx-auto px-4 py-4 flex space-x-6"><a href="/admin/dashboard" class="text-gray-700 hover:text-blue-700">Dashboard</a><a href="/admin/products" class="text-gray-700 hover:text-blue-700">Products</a><a href="/admin/categories" class="text-blue-700 font-semibold">Categories</a></div></nav>',1)),e("div",k,[t[10]||(t[10]=e("h1",{class:"text-3xl font-bold text-gray-900 mb-6"},"Category Management",-1)),(g=o.$page.props.flash)!=null&&g.success?(r(),l("div",I,a(o.$page.props.flash.success),1)):n("",!0),o.$page.props.errors&&Object.keys(o.$page.props.errors).length?(r(),l("div",M,[(r(!0),l(c,null,x(o.$page.props.errors,(s,u)=>(r(),l("div",{key:u},a(s),1))),128))])):n("",!0),e("div",E,[e("div",S,[t[8]||(t[8]=e("h2",{class:"text-xl font-semibold"},"Categories",-1)),e("button",{onClick:t[0]||(t[0]=(...s)=>d.openAddModal&&d.openAddModal(...s)),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},"Add Category")]),e("div",A,[e("table",N,[t[9]||(t[9]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Name"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Slug"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Active"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Image"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",D,[(r(!0),l(c,null,x(b.categories,s=>(r(),l("tr",{key:s.id},[e("td",F,a(s.name),1),e("td",V,a(s.slug),1),e("td",j,a(s.is_active?"Yes":"No"),1),e("td",U,[e("img",{src:s.image?`/${s.image}`:"/categories/default-category.png",class:"h-10 w-10 object-cover rounded"},null,8,B)]),e("td",q,[e("button",{onClick:u=>d.openEditModal(s),class:"text-blue-600 hover:underline mr-2"},"Edit",8,P),e("button",{onClick:u=>d.deleteCategory(s.id),class:"text-red-600 hover:underline"},"Delete",8,T)])]))),128))])])])])]),i.showModal?(r(),l("div",Y,[e("div",z,[e("h2",L,a(i.isEdit?"Edit Category":"Add New Category"),1),e("form",{onSubmit:t[7]||(t[7]=h((...s)=>d.saveCategory&&d.saveCategory(...s),["prevent"])),enctype:"multipart/form-data"},[e("div",O,[t[11]||(t[11]=e("label",{class:"block text-gray-700"},"Name",-1)),m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>i.form.name=s),type:"text",class:"w-full border rounded px-3 py-2 mt-1",required:""},null,512),[[p,i.form.name]])]),e("div",G,[t[12]||(t[12]=e("label",{class:"block text-gray-700"},"Slug",-1)),m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>i.form.slug=s),type:"text",class:"w-full border rounded px-3 py-2 mt-1",required:""},null,512),[[p,i.form.slug]])]),e("div",H,[t[13]||(t[13]=e("label",{class:"block text-gray-700"},"Description",-1)),m(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=s=>i.form.description=s),class:"w-full border rounded px-3 py-2 mt-1"},null,512),[[p,i.form.description]])]),e("div",J,[t[15]||(t[15]=e("label",{class:"block text-gray-700"},"Active",-1)),m(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>i.form.is_active=s),class:"w-full border rounded px-3 py-2 mt-1"},t[14]||(t[14]=[e("option",{value:1},"Yes",-1),e("option",{value:0},"No",-1)]),512),[[v,i.form.is_active]])]),e("div",K,[t[16]||(t[16]=e("label",{class:"block text-gray-700"},"Image",-1)),e("input",{type:"file",onChange:t[5]||(t[5]=(...s)=>d.handleImage&&d.handleImage(...s)),class:"w-full border rounded px-3 py-2 mt-1"},null,32),i.form.existingImage?(r(),l("div",Q,[e("img",{src:`/${i.form.existingImage}`,class:"h-20 w-20 object-cover rounded"},null,8,R)])):n("",!0)]),e("div",W,[e("button",{type:"button",onClick:t[6]||(t[6]=s=>i.showModal=!1),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded mr-2"},"Cancel"),t[17]||(t[17]=e("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded"},"Save",-1))])],32)])])):n("",!0)])}const te=w(_,[["render",X]]);export{te as default};
